<!DOCTYPE html>
<html lang="de">
<%- include('../partials/head') %>
<body class="bg-gray-50 text-gray-800">
  <%- include('../partials/header') %>
  <div class="max-w-md mx-auto mt-10 bg-white p-6 rounded shadow">
    <% if (error) { %>
      <p class="mb-4 text-center text-red-600"><%= error %></p>
    <% } %>

    <h1 class="mb-4 text-center text-xl font-semibold">Transaktion #<%= tx.id %> bearbeiten</h1>

    <form action="/admin/transactions/<%= tx.id %>/edit" method="post" class="space-y-4">
      <label class="block">
        <span>Freund:in</span>
        <select name="user_id" required class="w-full rounded border border-gray-300 p-2">
          <% users.forEach(u => { %>
            <option value="<%= u.id %>" <%= u.id === tx.user_id ? 'selected' : '' %>>
              <%= u.vorname %>
            </option>
          <% }) %>
        </select>
      </label>

      <div class="flex space-x-4">
        <label class="flex items-center space-x-1">
          <input type="radio" name="type" value="debt" <%= tx.type==='debt'?'checked':'' %> />
          <span>Schuld</span>
        </label>
        <label class="flex items-center space-x-1">
          <input type="radio" name="type" value="repayment" <%= tx.type==='repayment'?'checked':'' %> />
          <span>Tilgung</span>
        </label>
      </div>

      <label class="block">
        <span>Betrag</span>
        <input type="number" name="amount" step="0.01" value="<%= tx.amount %>" required class="w-full rounded border border-gray-300 p-2" />
      </label>

      <label class="block">
        <span>Datum</span>
        <input type="date" name="date" value="<%= tx.date %>" required class="w-full rounded border border-gray-300 p-2" />
      </label>

      <div class="flex justify-between">
        <button type="submit" class="rounded bg-blue-500 p-2 text-white hover:bg-blue-600">Speichern</button>
        <a href="/admin/transactions" class="rounded bg-gray-200 p-2 hover:bg-gray-300">Abbrechen</a>
      </div>
    </form>
  </div>
</body>
</html>

